model Message {
    id        String        @id @default(cuid())
    chatId    String
    content   String
    senderId  String
    type      MessageType   @default(TEXT)
    status    MessageStatus @default(SENT)
    readAt    DateTime?
    createdAt DateTime      @default(now())
    updatedAt DateTime      @default(now()) @updatedAt

    chat   Chat @relation(fields: [chatId], references: [id])
    sender User @relation(fields: [senderId], references: [id])

    @@index([chatId, createdAt])
    @@index([senderId])
}

enum MessageType {
    TEXT
    IMAGE
    OFFER
    SYSTEM
}

enum MessageStatus {
    SENDING
    SENT
    DELIVERED
    READ
    FAILED
}
